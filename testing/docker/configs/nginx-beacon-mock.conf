# Minimal nginx configuration to mock Lighthouse beacon node
# Provides essential endpoints for Vouch startup

events {
    worker_connections 64;
}

http {
    server {
        listen 5052;

        # Health endpoint
        location /eth/v1/node/health {
            return 200 '{"status": "ready"}';
            add_header Content-Type application/json;
        }

        # Version endpoint
        location /eth/v1/node/version {
            return 200 '{"data": {"version": "Mock/v1.0.0"}}';
            add_header Content-Type application/json;
        }

        # Syncing endpoint
        location /eth/v1/node/syncing {
            return 200 '{"data": {"is_syncing": false, "is_optimistic": false, "el_offline": false, "head_slot": "1000000", "sync_distance": "0"}}';
            add_header Content-Type application/json;
        }

        # Config spec endpoint
        location /eth/v1/config/spec {
            default_type application/json;
            alias /usr/share/nginx/html/config_spec.json;
        }

        # Genesis endpoint
        location /eth/v1/beacon/genesis {
            default_type application/json;
            alias /usr/share/nginx/html/genesis.json;
        }

        # Fork schedule
        location /eth/v1/config/fork_schedule {
            default_type application/json;
            alias /usr/share/nginx/html/fork_schedule.json;
        }

        # Deposit contract
        location /eth/v1/config/deposit_contract {
            return 200 '{"data": {"chain_id": "17000", "address": "0x4242424242424242424242424242424242424242"}}';
            add_header Content-Type application/json;
        }

        # Catch-all for other endpoints
        location / {
            return 200 '{}';
            add_header Content-Type application/json;
        }
    }
}
